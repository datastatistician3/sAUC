<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>sAUC in Python (saucpy) • sAUC</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">sAUC</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/bohora-etal-sauc-paper.pdf">Paper published in the Journal of Data Science</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/sAUC.html">sAUC in R</a>
</li>
<li>
  <a href="../reference/index.html">R Reference Functions</a>
</li>
<li>
  <a href="https://sombohora.shinyapps.io/sauc/">R Shiny Application</a>
</li>
<li>
  <a href="../articles/example-python.html">sAUC in Python</a>
</li>
<li>
  <a href="../articles/example-julia.html">sAUC in Julia</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sbohora/sAUC">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>sAUC in Python (saucpy)</h1>
            
          </div>

    
    
<div class="contents">
<p><span style="color:red; font-size:150%">Warning: This package is still under development.</span></p>
<div id="perform-auc-analyses-with-discrete-covariates-and-a-semi-parametric-estimation" class="section level3">
<h3 class="hasAnchor">
<a href="#perform-auc-analyses-with-discrete-covariates-and-a-semi-parametric-estimation" class="anchor"></a>Perform AUC analyses with discrete covariates and a semi-parametric estimation</h3>
</div>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<p><code>$ pip install saucpy</code></p>
<p><code>$ git clone https://github.com/sbohora/saucpy.git</code></p>
</div>
<div id="example" class="section level3">
<h3 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h3>
<p>To illustrate how to apply the proposed method, we obtained data from a randomized and controlled clinical trial, which was designed to increase knowledge and awareness to prevent Fetal Alcohol Spectrum Disorders (FASD) in children through the development of printed materials targeting women of childbearing age in Russia. One of the study objectives was to evaluate effects of FASD education brochures with different types of information and visual images on FASD related knowledge, attitudes, and alcohol consumption on childbearing-aged women. The study was conducted in two regions in Russia including St. Petersburg (SPB) and the Nizhny Novgorod Region (NNR) from 2005 to 2008. A total of 458 women were recruited from women’s clinics and were randomly assigned to one of three groups (defined by the GROUP variable): (1) a printed FASD prevention brochure with positive images and information stated in a positive way, positive group (PG), (2) a FASD education brochure with negative messages and vivid images, negative group (NG); and (3) a general health material, control group (CG). For the purpose of the analysis in this thesis, only women in the PG and CG were included. Data were obtained from the study principal investigators . The response variable was the change in the number of drinks per day (CHANGE_DRINK=number of drinks after-number of drinks before) on average in the last 30 days from one-month follow-up to baseline. Two covariates considered for the proposed method were “In the last 30 days, have you smoked cigarettes?” (SMOKE) and “In the last 30 days, did you take any other vitamins?” (OVITAMIN). Both covariates had “Yes” or “No” as the two levels. The question of interest here was to assess the joint predictive effects of SMOKE and OVITAMIN on whether the participants reduced the number of drinks per day from baseline to one month follow-up period. A total of 210 women with no missing data on any of the CHANGE_DRINK, SMOKE, GROUP, and OVITAMIN were included in the analysis.</p>
<p>The response variable CHANGE_DRINK was heavily skewed and not normally distributed in each group (Shapiro-Wilk p&lt;0.001). Therefore, we decided to use the AUG regression model to analyze the data. In the AUG regression model we define <span class="math display">\[\large \pi = p(Y_{CG} &gt; Y_{PG})\]</span> Note that the value of <span class="math inline">\(\large \pi\)</span> greater than .5 means that women in the PG had a greater reduction of alcohol drinks than those in the CG. For statistical results, all p-values &lt; .05 were considered statistically significant and 95% CIs were presented.</p>
<p>We first fit an AUC regression model including both main effects of the covariates. Note that the main effects of the covariates in fact represented their interactions with the GROUP variable, which is different than the linear or generalized linear model frame. The reason is that the GROUP variable is involved in defining the AUC. Tables below present the parameter estimates, SEs, p-values, and 95% CIs for model with one and two covariates. Because parameter <span class="math inline">\(\beta_2\)</span> was not significantly different from 0, we dropped OVITAMIN and fit another model including only the SMOKE main effect.Table below shows a significant interaction between SMOKE and GROUP because the SMOKE was statistically significant (95% CI: (0.06, 1.47)). Therefore, the final model was <span class="math display">\[logit(\hat{\pi}_{Smoke}) = \hat{\beta_0} + \hat{\beta_1}*I(Smoke =Yes)\]</span>. Because the interaction between SMOKE and GROUP was significant, we need to use AUC as a measure of the GROUP effect on CHANGE_DRINK for smokers and non-smokers separately using following formula for example for smokers;</p>
<p><span class="math display">\[\hat{\pi}_{Smoke} = \frac{e^{\hat{\beta_0} + \hat{\beta_1}*Smoke =Yes}}{1 + e^{\hat{\beta_0} + \hat{\beta_1}*Smoke =Yes}} \]</span> Specifically, the AUCs were 0.537 (insignificant) and 0.713 (significant) for non-smokers and smokers, respectively. This implies that the effect of positive and control brochures were similar for nonsmokers; however, for smokers, the probability that the positive brochure had a better effect than the control brochure in terms of alcohol reduction is 71.30%, indicating the positive brochure is a better option than the control brochure.</p>
</div>
<div id="result-of-sauc-regression-with-one-discrete-covariate" class="section level3">
<h3 class="hasAnchor">
<a href="#result-of-sauc-regression-with-one-discrete-covariate" class="anchor"></a>Result of sAUC Regression with one discrete covariate</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">from</span> pandas <span class="im">import</span> read_csv
<span class="im">from</span> saucpy <span class="im">import</span> sAUC

<span class="co"># Data analysis</span>
fasd <span class="op">=</span> read_csv(<span class="st">"../saucpy/data/fasd.csv"</span>)
fasd[<span class="st">'group'</span>] <span class="op">=</span> fasd[<span class="st">'group'</span>].astype(<span class="st">'category'</span>)
fasd[<span class="st">'x1'</span>]    <span class="op">=</span> fasd[<span class="st">'x1'</span>].astype(<span class="st">'category'</span>)
fasd[<span class="st">'x2'</span>]    <span class="op">=</span> fasd[<span class="st">'x2'</span>].astype(<span class="st">'category'</span>)

sAUC.semiparametricAUC(response <span class="op">=</span> <span class="st">"y"</span>, treatment_group <span class="op">=</span> [<span class="st">"group"</span>], input_covariates <span class="op">=</span> [<span class="st">"x1"</span>], data <span class="op">=</span> fasd)</code></pre></div>
</div>
<div id="model-summary-one-predictor" class="section level3">
<h3 class="hasAnchor">
<a href="#model-summary-one-predictor" class="anchor"></a>Model Summary: one predictor</h3>
<table class="table">
<thead><tr class="header">
<th>Predictors</th>
<th align="center">Coefficients</th>
<th align="center">Std. Error</th>
<th align="center">2.5%</th>
<th align="center">97.5%</th>
<th align="right"><em>p</em></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Intercept</td>
<td align="center">-0.909936</td>
<td align="center">0.315218</td>
<td align="center">-1.527751</td>
<td align="center">-0.292121</td>
<td align="right">0.003893</td>
</tr>
<tr class="even">
<td>x1[T.2]</td>
<td align="center">0.766786</td>
<td align="center">0.356420</td>
<td align="center">0.068216</td>
<td align="center">1.465356</td>
<td align="right">0.031448</td>
</tr>
</tbody>
</table>
</div>
<div id="result-of-sauc-regression-with-two-discrete-covariates" class="section level3">
<h3 class="hasAnchor">
<a href="#result-of-sauc-regression-with-two-discrete-covariates" class="anchor"></a>Result of sAUC Regression with two discrete covariates</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">sAUC.semiparametricAUC(response <span class="op">=</span> <span class="st">"y"</span>, treatment_group <span class="op">=</span> [<span class="st">"group"</span>], input_covariates <span class="op">=</span> [<span class="st">"x1"</span>,<span class="st">"x2"</span>], data <span class="op">=</span> fasd)</code></pre></div>
</div>
<div id="model-summary-two-predictors" class="section level3">
<h3 class="hasAnchor">
<a href="#model-summary-two-predictors" class="anchor"></a>Model Summary : two predictors</h3>
<table class="table">
<thead><tr class="header">
<th>Predictors</th>
<th align="center">Coefficients</th>
<th align="center">Std. Error</th>
<th align="center">2.5%</th>
<th align="center">97.5%</th>
<th align="right"><em>p</em></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Intercept</td>
<td align="center">-1.125352</td>
<td align="center">0.412748</td>
<td align="center">-1.934324</td>
<td align="center">-0.316380</td>
<td align="right">0.006401</td>
</tr>
<tr class="even">
<td>x1[T.2]</td>
<td align="center">0.781264</td>
<td align="center">0.355340</td>
<td align="center">0.084809</td>
<td align="center">1.477718</td>
<td align="right">0.027904</td>
</tr>
<tr class="odd">
<td>x2[T.2]</td>
<td align="center">0.252050</td>
<td align="center">0.328229</td>
<td align="center">-0.391267</td>
<td align="center">0.895368</td>
<td align="right">0.442541</td>
</tr>
</tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Som Bohora.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
